import{r as a}from"./index-ZI7Bts3D.js";const u=new Map;function l(r,n){let e;try{const t=localStorage.getItem(r);e=t?JSON.parse(t):n}catch(t){console.error(`Error loading ${r} from localStorage:`,t),e=n}let s=e;const c=new Set;return{getSnapshot(){return s},subscribe(t){return c.add(t),()=>c.delete(t)},setState(t){s=typeof t=="function"?t(s):t;try{localStorage.setItem(r,JSON.stringify(s))}catch(o){console.error(`Error saving ${r} to localStorage:`,o)}c.forEach(o=>o())}}}function g(r,n){const e=a.useMemo(()=>{const t=u.get(r);if(t)return t;const o=l(r,n);return u.set(r,o),o},[r,n]),s=a.useSyncExternalStore(e.subscribe,e.getSnapshot),c=a.useCallback(t=>{const o=typeof t=="function"?t(e.getSnapshot()):t;e.setState(o)},[e]);return[s,c]}export{g as u};
